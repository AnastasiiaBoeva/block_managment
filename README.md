# Управление блокировками подозрительных платежей клиентов
# Описание 

Проект представляет собой API решение для контроля и управления блокировками платежей клиентов в банковкой системе. Система позволяет оперативно реагировать на потенциально опасные операции, такие как: подозрение в мошенничестве, ошибка в реквизитах, AML-риски, обеспечивая безопасность платежей в соотвествии с требованиями.

Цель проекта - отработать навыки:
* составления API-спецификации;
* работы с Swagger;
* работы с сервисом Draw.io;
* проектирования ER-диаграммы.

# Содержание проекта
**API-спецификация (OpenAPI 3.1.0)**

Реализованы следующие эндпоинты:
1. Создание новой блокировки для клиента с указанием причины и типа блокировки
![image](https://github.com/user-attachments/assets/6dbc8f66-b5b0-4396-89e8-de7d318024ae)

2. Снятие активной блокировки
![image](https://github.com/user-attachments/assets/2420c531-2de6-4d4b-a059-d89474c26e29)

3. Получение текущего статуса блокировки клиента
![image](https://github.com/user-attachments/assets/f62917d6-52ad-4136-92aa-165c3d9464f1)

4. Изменение параметров существующей блокировки
![image](https://github.com/user-attachments/assets/785b2cdd-1b26-4aba-bdc6-c3e5b24038c9)

5. Получение списка всех активных блокировок
![image](https://github.com/user-attachments/assets/a0fe631e-0e37-4858-a371-3c5b1a347cc7)

**Пример запроса на блокировку клиента**
![image](https://github.com/user-attachments/assets/2268d816-070d-4679-a411-c11fbe7bf559)

**Структура базы данных**

База данных предназначена для хранения информации о блокировках платежей клиентов, включая архивные данные о блокировках. 
Основные компоненты:
1. clients - клиенты
Атрибуты:
* client_id (PK) - уникальный идентификатор клиента
* client_name - ФИО клиента
* client_type - тип клиента (физическое лицо)
* INN - ИНН, формат: 10 цифр без пробелов
* created_at - дата создания записи

![image](https://github.com/user-attachments/assets/d2d7c183-7c50-470a-bd40-de70b210a062)

2. block_reason - причины блокировки
Атрибуты:
* reason_id (PK) - уникальный идентификатор причины блокировки
* reason_name - причина блокировки (например, AML-риски, санции и т.д)
* description - описание причины блокировки (например, подозрительная активность)

![image](https://github.com/user-attachments/assets/5f0ff101-01c6-4170-8ba5-6f50c951f0bc)

3. block_types - типы блокировок
Атрибуты:
* block_type_id (PK) - уникальный идентификатор типа блокировки
* block_type_name - название типа блокировки (например, временная, частичная, проверка данных)
![image](https://github.com/user-attachments/assets/705993b5-4c24-46fd-8f9b-363bc874c4fa)

4. block_payments - блокировки платежей 
Атрибуты:
* block_id (PK) - уникальный идентификатор блокировки платежей
* client_id (FK)
* is_active - статус активности: True - активна, False - неактивна
* reason_id (FK)
* block_type_id (FK)
* start_date - дата начала блокировки
* end_date - дата окончания блокировки
* created_at - дата создания записи
* updated_at - дата обновления записи

![image](https://github.com/user-attachments/assets/9abeeb96-093a-4822-8d78-ec9cdb3f27b4)

Структура базы данных соответствует основным правилам нормализации (1NF-3NF). Связи между таблицами логичны и реализованы как "один ко многим" через внешние ключи:

* clients → block_payments: один ко многим через client_id (один клиент может иметь несколько блокировок в разное время или по разным причинам)

* block_reasons → block_payments: один ко многим через reason_id (одна причина блокировки может использоваться во многих блокировках block_payments)

* block_types → block_payments: один ко многим через block_type_id (один тип блокировки может применяться ко многим записям block_payments)

ER-диграмма:
![диаграмма_БД](https://github.com/user-attachments/assets/6dcc95bb-8cc6-4848-b6a8-ea3f116163ed)








